<!doctype html>
<html lang="ja">
<head>
<title>page3</title>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body>
  <a href="javascript:testPrev()">前のステップへ</a>

  ページ3<br>
 <a href="javascript:testNext()">次のステップへ</a>
  <input type="text" id="js-test">
  <input type="text" id="js-state">
<script>
var index = 100;
var initFlag = false;
function testNext() {
   if (initFlag) {
    history.pushState({index: 1}, null, null);
    history.pushState({index: 2}, null, null);
    history.pushState({index: 3}, null, null);
    initFlag = true;
   }
   index++;
   $('#js-test').val(index);

   history.pushState({index: index}, null, null);
}

function testPrev() {
   index--;
   $('#js-test').val(index);
}

window.onpopstate = function(event) {
   console.log(event.state);
   $('#js-state').val(JSON.stringify(event.state));
};
 
// 

</script>
</body>
</html>
